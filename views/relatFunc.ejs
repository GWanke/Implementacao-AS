<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Relatório de Funcionários</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<style>

table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 90%;
}

td, th {
  border: 1px solid black;
  text-align: left;
  padding: 8px;
}

/*tr:nth-child(even) {
  background-color: #d3d3d3;
}*/
.btn, .btn2 {
  cursor: pointer;
  font-size: 16px;  
  border: none;
  outline: none;
  color: black;
  padding: 14px 16px;
  background-color: inherit;
  font-family: inherit;
  margin: 0;
}
tr.desativo{
  color: #d3d3d3;
}
.searchBox {
    position:absolute;
    top: -4%;
    left: 75%;
    transform:  translate(-50%,50%);
    background: inherit;
    height: 40px;
    border-radius: 40px;
    padding: 10px;
}

.searchBox:hover > .searchInput {
    width: 240px;
    padding: 0 6px;
}

.searchBox:hover > .searchButton {
  background: inherit;
  color : black;
}

.searchButton {
    color: black;
    float: right;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: inherit;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: 0.4s;
}

.searchInput {
    border:none;
    background: inherit;
    outline:none;
    float:left;
    padding: 0;
    color: white;
    font-size: 16px;
    transition: 0.4s;
    line-height: 40px;
    width: 0px;
}

::placeholder { /* Chrome, Firefox, Opera, Safari 10.1+ */
  color: black;
  opacity: 1; /* Firefox */
}

input, select, textarea{
    color:#C0C0C0;
}

textarea:focus, input:focus {
    color:#000000;
}

.linha:hover{
	background-color: #d3d3d3
}
.total {
	text-align:right;
}


</style>
</head>
<body>

<h2>Funcionários</h2>
<div class="searchBox">
  <input class="searchInput"type="text" placeholder="Procurar..(nome,cargo)">
  <button class="searchButton" href="#">
    <i class="fa fa-search"></i>
      </button>
        </div>
<table id = 'tabela' >
	<th>Nome</th>
    <th>RG</th>
    <th>CPF</th>
    <th>Cargo</th>
  	<th>Salário</th>
  <tr class = 'linha'>
    <td onclick='tdclick(event,this)'>Filipe Mário Souza</td> 
    <td>368837348</td>
    <td>59625137548</td>
    <td>Técnico</td>
    <td>2500</td>
  </tr>
  <tr class = 'linha'>
  	<td onclick='tdclick(event,this)'>Esther Marcela Nina Viana</td>
    <td>448275119</td>
    <td>40654213810</td>
    <td>Secretária</td>
    <td>2100</td>
  </tr>
  <tr class = 'linha'>
  	<td onclick='tdclick(event,this)'>Marcela Aparecida da Cunha</td>
  	<td>222267227</td>
  	<td>63073061061</td>
  	<td>Secretária</td>
  	<td>2200</td>
  </tr>
    <tr class = 'linha'>
  	<td onclick='tdclick(event,this)'>Rodrigo Queiroz Aparecido</td>
  	<td>973726489</td>
  	<td>289037158902</td>
  	<td>Faxineiro</td>
  	<td>1750</td>
  </tr>
  <tfoot>	
  	<th class= "total" colspan="4">Despeza com Salários:</th>
  	<td></td>
  </tfoot>
</table>
<br>
<a href="/home" method = "POST"><button>Voltar</button></a>
<a href="#"><button style="float:right;">Exportar para PDF</button></a>
<script>
function tdclick(e,td){ 
    if (!e) var e = window.event;                	// Get the window event
    	if (e.stopPropagation) e.stopPropagation();  // Other Broswers
    		if (td.parentNode.cells[3].innerHTML === 'Técnico'){
    			window.open('/examesT','Lista de exames do Técnico','width=500,height=300');
    		}
    		else {
    			alert('O Funcionário não possui o cargo de Técnico,portanto, não possui exames realizados.')
    		}
};
//calcula despesa total
window.onload=function(){
	const linhas = document.getElementById('tabela').rows;
	var soma = 0
	for (i = 1; i < linhas.length -1 ;i++){
		soma += parseInt(linhas[i].cells[4].innerHTML);
	}
	linhas[linhas.length -1].cells[1].innerHTML = soma
	linhas[linhas.length -1].cells[1].style.color = 'red'
}; 
</script>
</body>
</html>
